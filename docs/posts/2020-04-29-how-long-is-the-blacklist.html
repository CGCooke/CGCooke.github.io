<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-04-29">
<meta name="description" content="A Bayesian approach.">

<title>Adventures with Numbers - How long is the Blacklist?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9MFEPRN75Y"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9MFEPRN75Y', { 'anonymize_ip': true});
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Adventures with Numbers</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/CGCooke"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/CGCooke"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How long is the Blacklist?</h1>
                  <div>
        <div class="description">
          A Bayesian approach.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Bayesian</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 29, 2020</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#bayes-in-brief" id="toc-bayes-in-brief" class="nav-link" data-scroll-target="#bayes-in-brief">Bayes in Brief</a></li>
  <li><a href="#putting-it-into-practice" id="toc-putting-it-into-practice" class="nav-link" data-scroll-target="#putting-it-into-practice">Putting it into practice</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>I’m learning French, and as part of my language-learning journey, I’m slowly working through <em>The Blacklist</em> on Netflix.</p>
<p>The show’s premise involves an antihero, played by James Spader, working through a list of nefarious characters, taking them down one at a time.</p>
<p>Out of idle intellectual curiosity, I was curious about how many names are on the list based on the sample of names given. It’s an interesting problem we can solve using Bayesian analysis, more commonly known as the “German Tank Problem” or the “Locomotive Problem”.</p>
<p>It’s also an exciting intro to Bayesian analysis. We are trying to infer an unknown quantity (The number of people on the list) while only being able to observe samples from this distribution.</p>
</section>
<section id="bayes-in-brief" class="level2">
<h2 class="anchored" data-anchor-id="bayes-in-brief">Bayes in Brief</h2>
<p>Many other, far better blog posts cover this topic, particularly this <a href="https://www.isaacslavitt.com/2015/12/19/german-tank-problem-with-pymc-and-pystan/">one</a>.</p>
<p>With that out of the way, let’s talk about the problem at hand and how we can solve it with Bayesian analysis.</p>
<p>We have some evidence, <span class="math inline">\(E\)</span>, which is what we observe. In this case, it’s the index in the blacklist that we find out about each episode. IE, in the first episode, it is entry number <span class="math inline">\(52\)</span>.</p>
<p>Then we have what we want to know, an estimate of the length of the blacklist, given the evidence we have observed. Given the evidence <span class="math inline">\(P(H|E)\)</span>, this is the probability of a hypothesis.</p>
<p>It’s a probability because we don’t know how long the blacklist is, given what we have observed, but we can work out how confident we can be about each potential option.</p>
<p>Given that <span class="math inline">\(P(H|E)\)</span> is what we want, we can use <em>Baye’s Formula</em> to find it.</p>
<p><span class="math inline">\(P(H|E) = \frac{P(E|H) P(H)}{P(E)}\)</span></p>
<p>We need three more pieces of the puzzle: <span class="math inline">\(P(E|H)\)</span>, <span class="math inline">\(P(H)\)</span> and <span class="math inline">\(P(E)\)</span>.</p>
<p><span class="math inline">\(P(E|H)\)</span> is the probability of the evidence, given the hypothesis. This term is also known as the <em>Likelihood</em> and is the one I found most confusing while initially learning about Bayesian analysis. In this case, it could be more complex.</p>
<p><span class="math inline">\(P(H)\)</span> is our prior belief about the possible hypothesis. In this case, it’s long we plausibly think the blacklist could be. In practice, we know it has to be as long as any of the entries we have observed.</p>
<p>Much of the criticism of Baysian analysis comes from the fact we can inject our own beliefs into the process. In this case, I don’t have a strong view about the length of the blacklist, but it’s reasonable to assume that it’s probably less than 200 entries long.</p>
<p>Let’s assume that the blacklist is of length <span class="math inline">\(N\)</span>. Let’s also believe any given entry is as likely to be the subject of each episode as any other. Then the probability of drawing any given number is <span class="math inline">\(\frac{1}{N}\)</span>. This is the likelihood. Also, note the subtle point that N has to be at least as large as the number we have drawn.</p>
<p>Finally, we have <span class="math inline">\(P(E)\)</span>, which is the probability of the evidence. This is just a normalisation factor, which is often ignored.</p>
<p>Let’s get down to business. Fortunately, Wikipedia has all the data we need.</p>
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 44%">
<col style="width: 8%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>No.&nbsp;overall</th>
<th>No.&nbsp;in season</th>
<th>Title</th>
<th>Blacklist guide</th>
<th>Directed by</th>
<th>Written by</th>
<th>Original air date</th>
<th>US viewers(millions)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>“Pilot”</td>
<td>No.&nbsp;52</td>
<td>Joe Carnahan</td>
<td>Jon Bokenkamp</td>
<td>September 23, 2013</td>
<td>12.58[10]</td>
</tr>
<tr class="even">
<td>2</td>
<td>2</td>
<td>“The Freelancer”</td>
<td>No.&nbsp;145</td>
<td>Jace Alexander</td>
<td>Jon Bokenkamp</td>
<td>September 30, 2013</td>
<td>11.35[11]</td>
</tr>
<tr class="odd">
<td>3</td>
<td>3</td>
<td>“Wujing”</td>
<td>No.&nbsp;84</td>
<td>Michael Watkins</td>
<td>Lukas Reiter</td>
<td>October 7, 2013</td>
<td>11.18[12]</td>
</tr>
<tr class="even">
<td>4</td>
<td>4</td>
<td>“The Stewmaker”</td>
<td>No.&nbsp;161</td>
<td>Vince Misiano</td>
<td>Patrick Massett &amp; John Zinman</td>
<td>October 14, 2013</td>
<td>10.93[13]</td>
</tr>
<tr class="odd">
<td>5</td>
<td>5</td>
<td>“The Courier”</td>
<td>No.&nbsp;85</td>
<td>Nick Gomez</td>
<td>John C. Kelley</td>
<td>October 21, 2013</td>
<td>10.44[14]</td>
</tr>
<tr class="even">
<td>6</td>
<td>6</td>
<td>“Gina Zanetakos”</td>
<td>No.&nbsp;152</td>
<td>Adam Arkin</td>
<td>Wendy West</td>
<td>October 28, 2013</td>
<td>10.51[15]</td>
</tr>
<tr class="odd">
<td>7</td>
<td>7</td>
<td>“Frederick Barnes”</td>
<td>No.&nbsp;47</td>
<td>Michael Watkins</td>
<td>J. R. Orci</td>
<td>November 4, 2013</td>
<td>10.34[16]</td>
</tr>
<tr class="even">
<td>8</td>
<td>8</td>
<td>“General Ludd”</td>
<td>No.&nbsp;109</td>
<td>Stephen Surjik</td>
<td>Amanda Kate Shuman</td>
<td>November 11, 2013</td>
<td>10.69[17]</td>
</tr>
<tr class="odd">
<td>9</td>
<td>9</td>
<td>“Anslo Garrick”</td>
<td>No.&nbsp;16</td>
<td>Joe Carnahan</td>
<td>Story by : Joe Carnahan &amp; Jason George Teleplay by : Joe Carnahan</td>
<td>November 25, 2013</td>
<td>10.96[18]</td>
</tr>
<tr class="even">
<td>10</td>
<td>10</td>
<td>“Anslo Garrick Conclusion”</td>
<td>No.&nbsp;16</td>
<td>Michael Watkins</td>
<td>Lukas Reiter &amp; J. R. Orci</td>
<td>December 2, 2013</td>
<td>11.67[19]</td>
</tr>
<tr class="odd">
<td>11</td>
<td>11</td>
<td>“The Good Samaritan”</td>
<td>No.&nbsp;106</td>
<td>Dan Lerner</td>
<td>Brandon Margolis &amp; Brandon Sonnier</td>
<td>January 13, 2014</td>
<td>9.35[20]</td>
</tr>
<tr class="even">
<td>12</td>
<td>12</td>
<td>“The Alchemist”</td>
<td>No.&nbsp;101</td>
<td>Vince Misiano</td>
<td>Anthony Sparks</td>
<td>January 20, 2014</td>
<td>8.83[21]</td>
</tr>
<tr class="odd">
<td>13</td>
<td>13</td>
<td>“The Cyprus Agency”</td>
<td>No.&nbsp;64</td>
<td>Michael Watkins</td>
<td>Lukas Reiter</td>
<td>January 27, 2014</td>
<td>10.17[22]</td>
</tr>
<tr class="even">
<td>14</td>
<td>14</td>
<td>“Madeline Pratt”</td>
<td>No.&nbsp;73</td>
<td>Michael Zinberg</td>
<td>Jim Campolongo</td>
<td>February 24, 2014</td>
<td>11.18[23]</td>
</tr>
<tr class="odd">
<td>15</td>
<td>15</td>
<td>“The Judge”</td>
<td>No.&nbsp;57</td>
<td>Peter Werner</td>
<td>Jonathan Shapiro &amp; Lukas Reiter</td>
<td>March 3, 2014</td>
<td>11.01[24]</td>
</tr>
<tr class="even">
<td>16</td>
<td>16</td>
<td>“Mako Tanida”</td>
<td>No.&nbsp;83</td>
<td>Michael Watkins</td>
<td>Story by : Joe Carnahan Teleplay by : John Eisendrath &amp; Jon Bokenkamp &amp; Patrick Massett &amp; John Zinman</td>
<td>March 17, 2014</td>
<td>10.97[25]</td>
</tr>
<tr class="odd">
<td>17</td>
<td>17</td>
<td>“Ivan”</td>
<td>No.&nbsp;88</td>
<td>Randy Zisk</td>
<td>J.R. Orci &amp; Amanda Kate Shuman</td>
<td>March 24, 2014</td>
<td>10.80[26]</td>
</tr>
<tr class="even">
<td>18</td>
<td>18</td>
<td>“Milton Bobbit”</td>
<td>No.&nbsp;135</td>
<td>Steven A. Adelson</td>
<td>Daniel Voll</td>
<td>March 31, 2014</td>
<td>11.39[27]</td>
</tr>
<tr class="odd">
<td>19</td>
<td>19</td>
<td>“The Pavlovich Brothers”</td>
<td>Nos. 119-122</td>
<td>Paul Edwards</td>
<td>Elizabeth Benjamin</td>
<td>April 21, 2014</td>
<td>11.24[28]</td>
</tr>
<tr class="even">
<td>20</td>
<td>20</td>
<td>“The Kingmaker”</td>
<td>No.&nbsp;42</td>
<td>Karen Gaviola</td>
<td>J. R. Orci &amp; Lukas Reiter</td>
<td>April 28, 2014</td>
<td>10.85[29]</td>
</tr>
<tr class="odd">
<td>21</td>
<td>21</td>
<td>“Berlin”</td>
<td>No.&nbsp;8</td>
<td>Michael Zinberg</td>
<td>John Eisendrath &amp; Jon Bokenkamp</td>
<td>May 5, 2014</td>
<td>10.47[30]</td>
</tr>
<tr class="even">
<td>22</td>
<td>22</td>
<td>“Berlin Conclusion”</td>
<td>No.&nbsp;8</td>
<td>Michael Watkins</td>
<td>Story by : Richard D’Ovidio Teleplay by : John Eisendrath &amp; Jon Bokenkamp &amp; Lukas Reiter &amp; J. R. Orci</td>
<td>May 12, 2014</td>
<td>10.44[31]</td>
</tr>
</tbody>
</table>
</section>
<section id="putting-it-into-practice" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-into-practice">Putting it into practice</h2>
<p>Now, let’s look at all the episodes, from the seasons that have been aired:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">15</span>]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># E: the data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array([<span class="dv">52</span>, <span class="dv">145</span>, <span class="dv">84</span>, <span class="dv">161</span>, <span class="dv">85</span>, <span class="dv">152</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>       <span class="dv">47</span>, <span class="dv">109</span>, <span class="dv">16</span>, <span class="dv">16</span>, <span class="dv">106</span>, <span class="dv">101</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>       <span class="dv">64</span>, <span class="dv">73</span>, <span class="dv">57</span>, <span class="dv">83</span>, <span class="dv">88</span>, <span class="dv">135</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>       <span class="dv">119</span>,<span class="dv">120</span>,<span class="dv">121</span>, <span class="dv">122</span>, <span class="dv">42</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">104</span>, <span class="dv">112</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>       <span class="dv">89</span>, <span class="dv">82</span>, <span class="dv">74</span>, <span class="dv">114</span>, <span class="dv">22</span>, <span class="dv">12</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>       <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">67</span>, <span class="dv">71</span>, <span class="dv">93</span>, <span class="dv">94</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>       <span class="dv">75</span>, <span class="dv">7</span>, <span class="dv">97</span>, <span class="dv">117</span>, <span class="dv">62</span>, <span class="dv">87</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>       <span class="dv">55</span>, <span class="dv">11</span>, <span class="dv">38</span>, <span class="dv">80</span>, <span class="dv">72</span>, <span class="dv">43</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>       <span class="dv">50</span>, <span class="dv">86</span>, <span class="dv">31</span>, <span class="dv">108</span>, <span class="dv">24</span>, <span class="dv">24</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>       <span class="dv">95</span>, <span class="dv">132</span>, <span class="dv">103</span>, <span class="dv">77</span>, <span class="dv">113</span>, <span class="dv">78</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>       <span class="dv">32</span>, <span class="dv">32</span>, <span class="dv">41</span>, <span class="dv">18</span>, <span class="dv">14</span>, <span class="dv">14</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>       <span class="dv">79</span>, <span class="dv">66</span>, <span class="dv">65</span>, <span class="dv">81</span>, <span class="dv">105</span>, <span class="dv">53</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>       <span class="dv">98</span>, <span class="dv">98</span>, <span class="dv">111</span>, <span class="dv">163</span>, <span class="dv">102</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>       <span class="dv">34</span>, <span class="dv">107</span>, <span class="dv">59</span>, <span class="dv">10</span>, <span class="dv">61</span>, <span class="dv">29</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>       <span class="dv">46</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">30</span>, <span class="dv">37</span>, <span class="dv">76</span>, <span class="dv">44</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>       <span class="dv">54</span>, <span class="dv">90</span>, <span class="dv">48</span>, <span class="dv">13</span>, <span class="dv">118</span>, <span class="dv">100</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>       <span class="dv">56</span>, <span class="dv">63</span>, <span class="dv">51</span>, <span class="dv">68</span>, <span class="dv">19</span>, <span class="dv">25</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>       <span class="dv">23</span>, <span class="dv">13</span>, <span class="dv">110</span>, <span class="dv">26</span>, <span class="dv">17</span>, <span class="dv">33</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>       <span class="dv">20</span>, <span class="dv">124</span>, <span class="dv">146</span>, <span class="dv">147</span>, <span class="dv">131</span>, <span class="dv">91</span>, <span class="dv">116</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>       <span class="dv">58</span>, <span class="dv">99</span>, <span class="dv">160</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">9</span>,</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        <span class="dv">6</span>, <span class="dv">115</span>, <span class="dv">69</span>, <span class="dv">136</span>, <span class="dv">92</span>, <span class="dv">128</span>,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>       <span class="dv">60</span>, <span class="dv">15</span>, <span class="dv">27</span>, <span class="dv">27</span>, <span class="dv">151</span>, <span class="dv">138</span>,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>       <span class="dv">130</span>, <span class="dv">125</span>, <span class="dv">162</span>, <span class="dv">159</span>, <span class="dv">3</span>, <span class="dv">137</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>       <span class="dv">155</span>, <span class="dv">144</span>, <span class="dv">126</span>, <span class="dv">158</span>, <span class="dv">149</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>       <span class="dv">150</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We are now plotting the episodes in order. If we had to guess now, we would likely guess that the length of the Blacklist is 163 episodes or a few more. This is because we have seen entries on the list up to 163, and It looks like nearly every entry on the list has been crossed off.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>plt.stem(np.sort(y), use_line_collection<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="2020-04-29-How-Long-Is-The-Blacklist_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Let’s say we have a sample of only the first ten episodes; what can we infer from this sample?</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>y_sample <span class="op">=</span> y[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>plt.stem(np.sort(y_sample), use_line_collection<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="2020-04-29-How-Long-Is-The-Blacklist_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Let’s define our likelihood function, <span class="math inline">\(P(E|H)\)</span>.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compute_likelyhood(i,observed):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&lt;</span> observed:</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        likelyhood <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        likelyhood <span class="op">=</span> <span class="fl">1.0</span><span class="op">/</span>i</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(likelyhood)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s define the prior belief <span class="math inline">\(P(H)\)</span> of what we think the length of the Blacklist could be.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>prior <span class="op">=</span> np.ones(<span class="dv">200</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>prior <span class="op">/=</span> prior.<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This prior is quite broad, and it’s also uniform. We aren’t imputing our human judgement about how long the list is.</p>
<p>Now, let’s start by computing the likelihood for each possible list length after watching the first episode and seeing person #52 crossed off the list.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>posterior <span class="op">=</span> np.zeros(<span class="dv">200</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>observed <span class="op">=</span> <span class="dv">52</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">200</span>):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    posterior[i] <span class="op">=</span> prior[i] <span class="op">*</span> compute_likelyhood(i,observed)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>posterior <span class="op">/=</span> posterior.<span class="bu">sum</span>()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>plt.stem(posterior)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'List length'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Confidence'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.xlim(150,175)</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/cooke_c/.local/lib/python3.7/site-packages/ipykernel_launcher.py:7: UserWarning: In Matplotlib 3.3 individual lines on a stem plot will be added as a LineCollection instead of individual lines. This significantly improves the performance of a stem plot. To remove this warning and switch to the new behaviour, set the "use_line_collection" keyword argument to True.
  import sys</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="2020-04-29-How-Long-Is-The-Blacklist_files/figure-html/cell-7-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Now we have this belief state, having seen the first episode, we can recursively use it as a prior and update it each time we see an episode:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pylab <span class="im">as</span> pl</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>posterior <span class="op">=</span> np.zeros(<span class="dv">200</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>episode_number <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> observed <span class="kw">in</span> y_sample:</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">200</span>):</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        posterior[i] <span class="op">=</span> prior[i] <span class="op">*</span> compute_likelyhood(i,observed)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    posterior <span class="op">/=</span> posterior.<span class="bu">sum</span>()</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    plt.plot(posterior,alpha<span class="op">=</span><span class="fl">0.35</span>,label<span class="op">=</span><span class="st">'Episode: '</span><span class="op">+</span><span class="bu">str</span>(episode_number ), color<span class="op">=</span>pl.cm.jet(episode_number<span class="op">/</span><span class="fl">10.0</span>))</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    episode_number<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    prior<span class="op">=</span>posterior</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'List length'</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Confidence'</span>)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">155</span>,<span class="dv">175</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="2020-04-29-How-Long-Is-The-Blacklist_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>From the above, as we see more data, our confidence in the length of the list increases. Let’s look at the cumulative probability for different list lengths:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>plt.plot(np.cumsum(posterior))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">155</span>,<span class="dv">185</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'List length'</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Cumulative Confidence'</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="2020-04-29-How-Long-Is-The-Blacklist_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>From this, we can see that we can be approximately 50% confident that the length of Blacklist is between 160 and 170 entries long after we have seen the first ten episodes.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>We have taken a lightning tour of how Bayesian analysis can allow us to infer from what we can observe a quantity we are interested in when a random process is involved.</p>
<p>In practice, Bayesian analysis isn’t conducted from first principles but instead uses a purpose-built library. Next time, I want to demonstrate how to do this analysis using PyMC3.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>